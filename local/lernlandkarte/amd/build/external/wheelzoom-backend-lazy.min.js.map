{"version":3,"file":"wheelzoom-backend-lazy.min.js","sources":["../../src/external/wheelzoom-backend-lazy.js"],"sourcesContent":["/* eslint-disable */\nwindow.wheelzoombackend = (function () {\n    return function () {\n        if (!window.wheelzoom) {\n            console.error(\"wheelzoom missing\");\n            return;\n        }\n        const txt_imgsrc = document.getElementById(\"txt_imgsrc\");\n        const sel_imgsrc = document.getElementById(\"sel_imgsrc\");\n        const btn_loadimg = document.getElementById(\"btn_loadimg\");\n        const shortCodeWrapper = document.getElementById(\"shortcodeWrapper\");\n        const shortCode = document.getElementById(\"shortcode\");\n        // const llk = document.getElementById('llk');\n        const llk = document.querySelector(`[id^=\"llk-\"]`);\n\n        const img = llk.querySelector('img');\n        var firstLoad = true;\n\n        btn_loadimg.addEventListener(\"click\", function () {\n            btn_loadimg.blur();\n            loadImage();\n        });\n        sel_imgsrc.addEventListener(\"change\", function () {\n            sel_imgsrc.blur();\n            txt_imgsrc.value = sel_imgsrc.value;\n            loadImage();\n        });\n        txt_imgsrc.addEventListener('keypress', function (event) {\n            if (event.key === 'Enter') {\n                loadImage();\n            }\n        });\n        img.addEventListener(\"wheelzoom.data\", function (event) {\n            const x = event.detail.x;\n            const y = event.detail.y;\n            const zoom = event.detail.zoom;\n            setShortcode(x, y, zoom);\n        });\n        var imgSrc = '/pix/spacer.gif';\n\n        function cleanUrl(sUrl) {\n            if (sUrl.startsWith('http')) {\n                const url = new URL(sUrl);\n                sUrl = url.pathname;\n            }\n            return sUrl;\n        }\n\n        function setShortcode(x, y, zoom) {\n            // imgSrc = cleanUrl(imgSrc);\n            shortCode.textContent =  `[lernlandkarte x=${x} y=${y} zoom=${zoom}]${imgSrc}[/lernlandkarte]`;\n        }\n        function loadImage() {\n            const imgUrl = cleanUrl(txt_imgsrc.value);\n            const tempImage = new Image();\n            tempImage.src = imgUrl;\n            tempImage.onload = function () {\n                llk.style.display = 'block';\n                shortCodeWrapper.style.display = 'block';\n                imgSrc = imgUrl;\n                img.src = imgUrl;\n                if(firstLoad) {\n                    wheelzoom(img, {\n                        zoom: 0.10,\n                        maxZoom: false,\n                        initialZoom: 1,\n                        initialX: 0.5,\n                        initialY: 0.5,\n                    });\n                    firstLoad = false;\n                }\n            };\n            tempImage.onerror = function () {\n                alert('Ungültige Bild-URL. Bitte geben Sie eine gültige URL ein.');\n            };\n        }\n    }\n}());\nwheelzoombackend();"],"names":["window","wheelzoombackend","wheelzoom","txt_imgsrc","document","getElementById","sel_imgsrc","btn_loadimg","shortCodeWrapper","shortCode","llk","querySelector","img","firstLoad","addEventListener","blur","loadImage","value","event","key","x","y","zoom","textContent","imgSrc","setShortcode","detail","console","error","sUrl","imgUrl","startsWith","URL","pathname","tempImage","Image","src","onload","style","display","maxZoom","initialZoom","initialX","initialY","onerror","alert"],"mappings":"AACAA,OAAOC,iBACI,cACED,OAAOE,eAINC,WAAaC,SAASC,eAAe,cACrCC,WAAaF,SAASC,eAAe,cACrCE,YAAcH,SAASC,eAAe,eACtCG,iBAAmBJ,SAASC,eAAe,oBAC3CI,UAAYL,SAASC,eAAe,aAEpCK,IAAMN,SAASO,8BAEfC,IAAMF,IAAIC,cAAc,OAC1BE,WAAY,EAEhBN,YAAYO,iBAAiB,SAAS,WAClCP,YAAYQ,OACZC,eAEJV,WAAWQ,iBAAiB,UAAU,WAClCR,WAAWS,OACXZ,WAAWc,MAAQX,WAAWW,MAC9BD,eAEJb,WAAWW,iBAAiB,YAAY,SAAUI,OAC5B,UAAdA,MAAMC,KACNH,eAGRJ,IAAIE,iBAAiB,kBAAkB,SAAUI,iBAgB3BE,EAAGC,EAAGC,MAExBb,UAAUc,uCAAmCH,gBAAOC,mBAAUC,iBAAQE,2BAdtEC,CAHUP,MAAMQ,OAAON,EACbF,MAAMQ,OAAOL,EACVH,MAAMQ,OAAOJ,aAG1BE,OAAS,uBAlCTG,QAAQC,MAAM,8BAgDTZ,gBAZSa,KAaRC,SAbQD,KAaU1B,WAAWc,OAZ1Bc,WAAW,UAEhBF,KADY,IAAIG,IAAIH,MACTI,UAERJ,MASDK,UAAY,IAAIC,MACtBD,UAAUE,IAAMN,OAChBI,UAAUG,OAAS,WACf3B,IAAI4B,MAAMC,QAAU,QACpB/B,iBAAiB8B,MAAMC,QAAU,QACjCf,OAASM,OACTlB,IAAIwB,IAAMN,OACPjB,YACCX,UAAUU,IAAK,CACXU,KAAM,GACNkB,SAAS,EACTC,YAAa,EACbC,SAAU,GACVC,SAAU,KAEd9B,WAAY,IAGpBqB,UAAUU,QAAU,WAChBC,MAAM,gEAKtB5C"}