{"version":3,"file":"wheelzoom.min.js","sources":["../../src/external/wheelzoom.js"],"sourcesContent":["/*!\n Wheelzoom 4.0.1\n license: MIT\n http://www.jacklmoore.com/wheelzoom\n*/\n/* eslint-disable */\nwindow.wheelzoom = (function () {\n    var defaults = {\n        zoom: 0.10,\n        maxZoom: false,\n        initialZoom: 1,\n        initialX: 0.5,\n        initialY: 0.5,\n    };\n\n    var main = function (img, options) {\n        if (!img || !img.nodeName || img.nodeName !== 'IMG') {\n            return;\n        }\n\n        var settings = {};\n        var zoom;\n        var width;\n        var height;\n        var bgWidth;\n        var bgHeight;\n        var bgPosX;\n        var bgPosY;\n        var previousEvent;\n        var transparentSpaceFiller;\n\n        function triggerUpdateDataEvent() {\n            let x = ((width * 0.5 - bgPosX) / bgWidth * 100).toFixed(1);\n            let y = ((height * 0.5 - bgPosY) / bgHeight * 100).toFixed(1);\n            // let currentZoom = ((bgWidth / img.naturalWidth) * 100).toFixed(0);\n            let currentZoom = ((bgWidth / width) * 100).toFixed(0);\n\n            img.dispatchEvent(new CustomEvent('wheelzoom.data', {\n                bubbles: true,\n                detail: {\n                    x: x,\n                    y: y,\n                    zoom: currentZoom\n                }\n            }))\n        }\n\n        function setSrcToBackground(img) {\n            img.style.backgroundRepeat = 'no-repeat';\n            img.style.backgroundImage = 'url(\"' + img.src + '\")';\n            transparentSpaceFiller = 'data:image/svg+xml;base64,' + window.btoa('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + img.naturalWidth + '\" height=\"' + img.naturalHeight + '\"></svg>');\n            img.src = transparentSpaceFiller;\n        }\n\n        function updateBgStyle() {\n            if (bgPosX > 0) {\n                bgPosX = 0;\n            } else if (bgPosX < width - bgWidth) {\n                bgPosX = width - bgWidth;\n            }\n\n            if (bgPosY > 0) {\n                bgPosY = 0;\n            } else if (bgPosY < height - bgHeight) {\n                bgPosY = height - bgHeight;\n            }\n            img.style.backgroundSize = bgWidth + 'px ' + bgHeight + 'px';\n            img.style.backgroundPosition = bgPosX + 'px ' + bgPosY + 'px';\n            triggerUpdateDataEvent();\n        }\n\n        function reset() {\n            bgWidth = width;\n            bgHeight = height;\n            bgPosX = bgPosY = 0;\n            updateBgStyle();\n        }\n\n        function onwheel(e) {\n            // console.log('onwheel');\n            var deltaY = 0;\n\n            e.preventDefault();\n\n            if (e.deltaY) { // FireFox 17+ (IE9+, Chrome 31+?)\n                deltaY = e.deltaY;\n            } else if (e.wheelDelta) {\n                deltaY = -e.wheelDelta;\n            }\n\n            // As far as I know, there is no good cross-browser way to get the cursor position relative to the event target.\n            // We have to calculate the target element's position relative to the document, and subtrack that from the\n            // cursor's position relative to the document.\n            var rect = img.getBoundingClientRect();\n            var offsetX = e.pageX - rect.left - window.pageXOffset;\n            var offsetY = e.pageY - rect.top - window.pageYOffset;\n\n            // Record the offset between the bg edge and cursor:\n            var bgCursorX = offsetX - bgPosX;\n            var bgCursorY = offsetY - bgPosY;\n\n            // Use the previous offset to get the percent offset between the bg edge and cursor:\n            var bgRatioX = bgCursorX / bgWidth;\n            var bgRatioY = bgCursorY / bgHeight;\n\n            // Update the bg size:\n            if (deltaY < 0) {\n                bgWidth += bgWidth * settings.zoom;\n                bgHeight += bgHeight * settings.zoom;\n            } else {\n                bgWidth -= bgWidth * settings.zoom;\n                bgHeight -= bgHeight * settings.zoom;\n            }\n\n            if (settings.maxZoom) {\n                bgWidth = Math.min(width * settings.maxZoom, bgWidth);\n                bgHeight = Math.min(height * settings.maxZoom, bgHeight);\n            }\n\n            // Take the percent offset and apply it to the new size:\n            bgPosX = offsetX - (bgWidth * bgRatioX);\n            bgPosY = offsetY - (bgHeight * bgRatioY);\n\n            // Prevent zooming out beyond the starting size\n            if (bgWidth <= width || bgHeight <= height) {\n                reset();\n            } else {\n                updateBgStyle();\n            }\n        }\n\n        function onResize() {\n            var computedStyle = window.getComputedStyle(img, null);\n            width = parseInt(computedStyle.width, 10);\n            height = parseInt(computedStyle.height, 10);\n            // Range zoom = [100...2000]\n            bgWidth = width * zoom;\n            bgHeight = height * zoom;\n            bgPosX = width * 0.5 - bgWidth * settings.initialX;\n            bgPosY = height * 0.5 - bgHeight * settings.initialY;\n            img.style.backgroundSize = bgWidth + 'px ' + bgHeight + 'px';\n            img.style.backgroundPosition = bgPosX + 'px ' + bgPosY + 'px';\n            // console.log('loadCalc', 'zoom', zoom, 'width', width, 'height', height);\n            // console.log('loadCalc', 'bgPosX', bgPosX, 'bgPosY', bgPosY);\n            // console.log('loadCalc', 'bgWidth', bgWidth, 'bgHeight', bgHeight);\n        }\n\n        function drag(e) {\n            e.preventDefault();\n            bgPosX += (e.pageX - previousEvent.pageX);\n            bgPosY += (e.pageY - previousEvent.pageY);\n            previousEvent = e;\n            updateBgStyle();\n        }\n\n        function removeDrag() {\n            document.removeEventListener('mouseup', removeDrag);\n            document.removeEventListener('mousemove', drag);\n        }\n\n        // Make the background draggable\n        function draggable(e) {\n            e.preventDefault();\n            previousEvent = e;\n            document.addEventListener('mousemove', drag);\n            document.addEventListener('mouseup', removeDrag);\n        }\n\n        function setZoom() {\n            zoom = settings.initialZoom;\n            if (settings.initialZoom < 1) {\n                zoom = 1;\n            } else if (settings.initialZoom > 20) {\n                zoom = 20.0;\n            }\n        }\n        function load() {\n            zoom = settings.initialZoom;\n            if (settings.initialZoom < 1) {\n                zoom = 1;\n            } else if (settings.initialZoom > 20) {\n                zoom = 20.0;\n            }\n            if (img.src === transparentSpaceFiller) {\n                // console.log('loadCalc', 'is transparentSpaceFiller');\n                return;\n            }\n            var computedStyle = window.getComputedStyle(img, null);\n\n            width = parseInt(computedStyle.width, 10);\n            height = parseInt(computedStyle.height, 10);\n\n            // Range zoom = [10...500]\n\n            // bgWidth = img.naturalWidth * zoom;\n            // bgHeight = img.naturalHeight * zoom;\n            // bgPosX = width * 0.5 - bgWidth * settings.initialX;\n            // bgPosY = height * 0.5 - bgHeight * settings.initialY;\n\n            // Range zoom = [100...2000]\n            bgWidth = width * zoom;\n            bgHeight = height * zoom;\n            bgPosX = width * 0.5 - bgWidth * settings.initialX;\n            bgPosY = height * 0.5 - bgHeight * settings.initialY;\n\n            // Original: Werte weichen ab\n            // bgWidth = width * zoom;\n            // bgHeight = height * zoom;\n            // bgPosX = -(bgWidth - width) * settings.initialX;\n            // bgPosY = -(bgHeight - height) * settings.initialY;\n\n            setSrcToBackground(img);\n\n            img.style.backgroundSize = bgWidth + 'px ' + bgHeight + 'px';\n            img.style.backgroundPosition = bgPosX + 'px ' + bgPosY + 'px';\n            triggerUpdateDataEvent();\n            img.addEventListener('wheelzoom.reset', reset);\n            img.addEventListener('wheel', onwheel);\n            img.addEventListener('mousedown', draggable);\n        }\n\n        var destroy = function (originalProperties) {\n            img.removeEventListener('wheelzoom.destroy', destroy);\n            img.removeEventListener('wheelzoom.reset', reset);\n            img.removeEventListener('load', load);\n            img.removeEventListener('mouseup', removeDrag);\n            img.removeEventListener('mousemove', drag);\n            img.removeEventListener('mousedown', draggable);\n            img.removeEventListener('wheel', onwheel);\n\n            img.style.backgroundImage = originalProperties.backgroundImage;\n            img.style.backgroundRepeat = originalProperties.backgroundRepeat;\n            img.src = originalProperties.src;\n        }.bind(null, {\n            backgroundImage: img.style.backgroundImage,\n            backgroundRepeat: img.style.backgroundRepeat,\n            src: img.src\n        });\n\n        img.addEventListener('wheelzoom.destroy', destroy);\n\n        options = options || {};\n\n        Object.keys(defaults).forEach(function (key) {\n            settings[key] = options[key] !== undefined ? options[key] : defaults[key];\n        });\n\n        if (img.complete) {\n            load();\n            // new ResizeObserver(onResize).observe(document.getElementById('llk'));\n            new ResizeObserver(onResize).observe(img);\n        }\n\n        img.addEventListener('load', load);\n\n    };\n\n    // Do nothing in IE9 or below\n    if (typeof window.btoa !== 'function') {\n        return function (elements) {\n            return elements;\n        };\n    } else {\n        return function (elements, options) {\n            if (elements && elements.length) {\n                Array.prototype.forEach.call(elements, function (node) {\n                    main(node, options);\n                });\n            } else if (elements && elements.nodeName) {\n                main(elements, options);\n            }\n            return elements;\n        };\n    }\n}());"],"names":["defaults","main","window","wheelzoom","zoom","maxZoom","initialZoom","initialX","initialY","img","options","nodeName","width","height","bgWidth","bgHeight","bgPosX","bgPosY","previousEvent","transparentSpaceFiller","settings","destroy","originalProperties","removeEventListener","reset","load","removeDrag","drag","draggable","onwheel","style","backgroundImage","backgroundRepeat","src","bind","addEventListener","Object","keys","forEach","key","undefined","complete","ResizeObserver","computedStyle","getComputedStyle","parseInt","backgroundSize","backgroundPosition","observe","triggerUpdateDataEvent","x","toFixed","y","currentZoom","dispatchEvent","CustomEvent","bubbles","detail","updateBgStyle","e","deltaY","preventDefault","wheelDelta","rect","getBoundingClientRect","offsetX","pageX","left","pageXOffset","offsetY","pageY","top","pageYOffset","bgRatioX","bgRatioY","Math","min","document","btoa","naturalWidth","naturalHeight","setSrcToBackground","elements","length","Array","prototype","call","node"],"mappings":"AAMoB,IACZA,SAQAC,KATRC,OAAOC,WACCH,SAAW,CACXI,KAAM,GACNC,SAAS,EACTC,YAAa,EACbC,SAAU,GACVC,SAAU,IAGVP,KAAO,SAAUQ,IAAKC,YACjBD,KAAQA,IAAIE,UAA6B,QAAjBF,IAAIE,cAK7BP,KACAQ,MACAC,OACAC,QACAC,SACAC,OACAC,OACAC,cACAC,uBATAC,SAAW,GAyMXC,QAAU,SAAUC,oBACpBb,IAAIc,oBAAoB,oBAAqBF,SAC7CZ,IAAIc,oBAAoB,kBAAmBC,OAC3Cf,IAAIc,oBAAoB,OAAQE,MAChChB,IAAIc,oBAAoB,UAAWG,YACnCjB,IAAIc,oBAAoB,YAAaI,MACrClB,IAAIc,oBAAoB,YAAaK,WACrCnB,IAAIc,oBAAoB,QAASM,SAEjCpB,IAAIqB,MAAMC,gBAAkBT,mBAAmBS,gBAC/CtB,IAAIqB,MAAME,iBAAmBV,mBAAmBU,iBAChDvB,IAAIwB,IAAMX,mBAAmBW,KAC/BC,KAAK,KAAM,CACTH,gBAAiBtB,IAAIqB,MAAMC,gBAC3BC,iBAAkBvB,IAAIqB,MAAME,iBAC5BC,IAAKxB,IAAIwB,MAGbxB,IAAI0B,iBAAiB,oBAAqBd,SAE1CX,QAAUA,SAAW,GAErB0B,OAAOC,KAAKrC,UAAUsC,SAAQ,SAAUC,KACpCnB,SAASmB,UAAwBC,IAAjB9B,QAAQ6B,KAAqB7B,QAAQ6B,KAAOvC,SAASuC,QAGrE9B,IAAIgC,WACJhB,WAEIiB,+BAtHAC,cAAgBzC,OAAO0C,iBAAiBnC,IAAK,MACjDG,MAAQiC,SAASF,cAAc/B,MAAO,IACtCC,OAASgC,SAASF,cAAc9B,OAAQ,IAGxCE,SAAWF,OAAST,KACpBY,OAAiB,GAARJ,OAFTE,QAAUF,MAAQR,MAEegB,SAASb,SAC1CU,OAAkB,GAATJ,OAAeE,SAAWK,SAASZ,SAC5CC,IAAIqB,MAAMgB,eAAiBhC,QAAU,MAAQC,SAAW,KACxDN,IAAIqB,MAAMiB,mBAAqB/B,OAAS,MAAQC,OAAS,QA6G5B+B,QAAQvC,MAGzCA,IAAI0B,iBAAiB,OAAQV,eA9NpBwB,6BACDC,IAAc,GAARtC,MAAcI,QAAUF,QAAU,KAAKqC,QAAQ,GACrDC,IAAe,GAATvC,OAAeI,QAAUF,SAAW,KAAKoC,QAAQ,GAEvDE,aAAgBvC,QAAUF,MAAS,KAAKuC,QAAQ,GAEpD1C,IAAI6C,cAAc,IAAIC,YAAY,iBAAkB,CAChDC,SAAS,EACTC,OAAQ,CACJP,EAAGA,EACHE,EAAGA,EACHhD,KAAMiD,yBAYTK,gBACD1C,OAAS,EACTA,OAAS,EACFA,OAASJ,MAAQE,UACxBE,OAASJ,MAAQE,SAGjBG,OAAS,EACTA,OAAS,EACFA,OAASJ,OAASE,WACzBE,OAASJ,OAASE,UAEtBN,IAAIqB,MAAMgB,eAAiBhC,QAAU,MAAQC,SAAW,KACxDN,IAAIqB,MAAMiB,mBAAqB/B,OAAS,MAAQC,OAAS,KACzDgC,kCAGKzB,QACLV,QAAUF,MACVG,SAAWF,OACXG,OAASC,OAAS,EAClByC,yBAGK7B,QAAQ8B,OAETC,OAAS,EAEbD,EAAEE,iBAEEF,EAAEC,OACFA,OAASD,EAAEC,OACJD,EAAEG,aACTF,QAAUD,EAAEG,gBAMZC,KAAOtD,IAAIuD,wBACXC,QAAUN,EAAEO,MAAQH,KAAKI,KAAOjE,OAAOkE,YACvCC,QAAUV,EAAEW,MAAQP,KAAKQ,IAAMrE,OAAOsE,YAOtCC,UAJYR,QAAUjD,QAICF,QACvB4D,UAJYL,QAAUpD,QAICF,SAGvB6C,OAAS,GACT9C,SAAWA,QAAUM,SAAShB,KAC9BW,UAAYA,SAAWK,SAAShB,OAEhCU,SAAWA,QAAUM,SAAShB,KAC9BW,UAAYA,SAAWK,SAAShB,MAGhCgB,SAASf,UACTS,QAAU6D,KAAKC,IAAIhE,MAAQQ,SAASf,QAASS,SAC7CC,SAAW4D,KAAKC,IAAI/D,OAASO,SAASf,QAASU,WAInDC,OAASiD,QAAWnD,QAAU2D,SAC9BxD,OAASoD,QAAWtD,SAAW2D,SAG3B5D,SAAWF,OAASG,UAAYF,OAChCW,QAEAkC,yBAoBC/B,KAAKgC,GACVA,EAAEE,iBACF7C,QAAW2C,EAAEO,MAAQhD,cAAcgD,MACnCjD,QAAW0C,EAAEW,MAAQpD,cAAcoD,MACnCpD,cAAgByC,EAChBD,yBAGKhC,aACLmD,SAAStD,oBAAoB,UAAWG,YACxCmD,SAAStD,oBAAoB,YAAaI,eAIrCC,UAAU+B,GACfA,EAAEE,iBACF3C,cAAgByC,EAChBkB,SAAS1C,iBAAiB,YAAaR,MACvCkD,SAAS1C,iBAAiB,UAAWT,qBAWhCD,UACLrB,KAAOgB,SAASd,YACZc,SAASd,YAAc,EACvBF,KAAO,EACAgB,SAASd,YAAc,KAC9BF,KAAO,IAEPK,IAAIwB,MAAQd,4BAIZwB,cAAgBzC,OAAO0C,iBAAiBnC,IAAK,MAEjDG,MAAQiC,SAASF,cAAc/B,MAAO,IACtCC,OAASgC,SAASF,cAAc9B,OAAQ,IAWxCE,SAAWF,OAAST,KACpBY,OAAiB,GAARJ,OAFTE,QAAUF,MAAQR,MAEegB,SAASb,SAC1CU,OAAkB,GAATJ,OAAeE,SAAWK,SAASZ,kBA5JpBC,KACxBA,IAAIqB,MAAME,iBAAmB,YAC7BvB,IAAIqB,MAAMC,gBAAkB,QAAUtB,IAAIwB,IAAM,KAChDd,uBAAyB,6BAA+BjB,OAAO4E,KAAK,kDAAoDrE,IAAIsE,aAAe,aAAetE,IAAIuE,cAAgB,YAC9KvE,IAAIwB,IAAMd,uBAgKV8D,CAAmBxE,KAEnBA,IAAIqB,MAAMgB,eAAiBhC,QAAU,MAAQC,SAAW,KACxDN,IAAIqB,MAAMiB,mBAAqB/B,OAAS,MAAQC,OAAS,KACzDgC,yBACAxC,IAAI0B,iBAAiB,kBAAmBX,OACxCf,IAAI0B,iBAAiB,QAASN,SAC9BpB,IAAI0B,iBAAiB,YAAaP,cAwCf,mBAAhB1B,OAAO4E,KACP,SAAUI,iBACNA,UAGJ,SAAUA,SAAUxE,gBACnBwE,UAAYA,SAASC,OACrBC,MAAMC,UAAU/C,QAAQgD,KAAKJ,UAAU,SAAUK,MAC7CtF,KAAKsF,KAAM7E,YAERwE,UAAYA,SAASvE,UAC5BV,KAAKiF,SAAUxE,SAEZwE"}